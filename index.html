<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ù…Ù„ÙƒÙŠØ© Ù„Ù„ØªÙˆØµÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„Ø¶ÙØªÙŠÙ†</title>
    <style>
        /* Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© */
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #1a1a1a; padding: 15px; color: #333; }
        .card { max-width: 500px; margin: auto; background: #ffffff; padding: 20px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); border-top: 5px solid #d4af37; }
        
        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø´Ø¹Ø§Ø± Ø§Ù„Ù†ØµÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯ */
        .logo-text { text-align: center; margin-bottom: 25px; padding: 10px; }
        .logo-text h1 { 
            color: #8e1b1b; 
            font-size: 26px; 
            margin: 0; 
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
            border-bottom: 2px double #d4af37;
            display: inline-block;
            padding-bottom: 5px;
        }
        .logo-subtitle { color: #d4af37; font-size: 14px; display: block; margin-top: 5px; font-weight: bold; }

        h2 { color: #333; text-align: center; font-size: 18px; margin-top: 0; opacity: 0.8; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; font-size: 14px; }
        input, select, textarea { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 10px; box-sizing: border-box; background: #f9f9f9; font-size: 14px; }
        
        .hidden { display: none; }
        
        /* ØªÙ†Ø³ÙŠÙ‚ Ù‚Ø³Ù… Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ÙˆØ§Ù„Ø¯ÙˆÙ„Ø© */
        .phone-container { display: flex; gap: 10px; }
        .phone-container select { flex: 1; }
        .phone-container input { flex: 2; }

        .agreement { background: #fff9e6; padding: 10px; border-radius: 8px; border: 1px solid #ffeeba; font-size: 13px; display: flex; align-items: flex-start; gap: 10px; }
        .agreement input { width: auto; margin-top: 3px; }
        
        .btn-whatsapp { background: linear-gradient(45deg, #25D366, #128C7E); color: white; padding: 15px; border: none; border-radius: 10px; cursor: pointer; width: 100%; font-size: 16px; font-weight: bold; margin-top: 20px; box-shadow: 0 4px 10px rgba(37, 211, 102, 0.3); transition: 0.3s; }
        .btn-whatsapp:hover { transform: translateY(-2px); box-shadow: 0 6px 15px rgba(37, 211, 102, 0.4); }
    </style>
</head>
<body>

<div class="card">
    <div class="logo-text">
        <h1>Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ù…Ù„ÙƒÙŠØ©</h1>
        <span class="logo-subtitle">Ù„Ù„ØªÙˆØµÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„Ø¶ÙØªÙŠÙ†</span>
    </div>

    <h2>Ø·Ù„Ø¨ ØªÙˆØµÙŠÙ„ Ø¬Ø¯ÙŠØ¯</h2>
    
    <div class="form-group">
        <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø±Ø³Ù„:</label>
        <input type="text" id="senderName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
    </div>

    <div class="form-group">
        <label>Ø§Ù„Ø¯ÙˆÙ„Ø© ÙˆØ±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</label>
        <div class="phone-container">
            <select id="countrySelect" onchange="toggleCountryField()">
                <option value="+962">Ø§Ù„Ø£Ø±Ø¯Ù† (+962)</option>
                <option value="+970">ÙÙ„Ø³Ø·ÙŠÙ† (+970)</option>
                <option value="+972">Ø¥Ø³Ø±Ø§Ø¦ÙŠÙ„ (+972)</option>
                <option value="other">Ø£Ø®Ø±Ù‰</option>
            </select>
            <input type="tel" id="senderPhone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
        </div>
    </div>

    <div id="customCountryGroup" class="form-group hidden">
        <label>Ù…ÙØªØ§Ø­ Ø§Ù„Ø¯ÙˆÙ„Ø© (Ù…Ø«Ø§Ù„: +44):</label>
        <input type="text" id="customCountryCode" placeholder="+000">
    </div>

    <div class="form-group">
        <label>Ù†ÙˆØ¹ Ø§Ù„Ø´Ø­Ù†Ø©:</label>
        <select id="itemType" onchange="toggleOtherField()">
            <option value="ÙˆØ«Ø§Ø¦Ù‚ Ø±Ø³Ù…ÙŠØ©">ÙˆØ«Ø§Ø¦Ù‚ Ø±Ø³Ù…ÙŠØ©</option>
            <option value="Ø·Ø±Ø¯ Ø¨Ø±ÙŠØ¯ÙŠ">Ø·Ø±Ø¯ Ø¨Ø±ÙŠØ¯ÙŠ</option>
            <option value="Ø£Ø®Ø±Ù‰">Ø£Ø®Ø±Ù‰ (ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙˆØµÙ)</option>
        </select>
    </div>

    <div id="otherDescriptionGroup" class="form-group hidden">
        <label>ÙˆØµÙ Ø§Ù„Ø´Ø­Ù†Ø©:</label>
        <textarea id="otherInfo" rows="2" placeholder="Ù…Ø§Ø°Ø§ ØªØ±ÙŠØ¯ Ø£Ù† ØªØ´Ø­Ù†ØŸ"></textarea>
    </div>

    <div class="form-group">
        <label>Ø¬Ù‡Ø© Ø§Ù„Ø¯ÙØ¹:</label>
        <select id="paymentMethod">
            <option value="Ø§Ù„Ù…Ø±Ø³Ù„">Ø§Ù„Ù…Ø±Ø³Ù„</option>
            <option value="Ø§Ù„Ù…Ø³ØªÙ„Ù…">Ø§Ù„Ù…Ø³ØªÙ„Ù…</option>
        </select>
    </div>

    <div class="agreement">
        <input type="checkbox" id="agreeCheck">
        <label for="agreeCheck">Ø£Ù‚Ø± Ø¨Ø£Ù† Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙŠ Ø£Ù‚Ø¯Ù…Ù‡Ø§ Ù„Ø·Ù„Ø¨ÙŠ ØµØ­ÙŠØ­Ø© ÙˆØ£ØªØ­Ù…Ù„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø§Ù„ÙƒØ§Ù…Ù„Ø© Ø¹Ù† Ø¯Ù‚ØªÙ‡Ø§.</label>
    </div>

    <button class="btn-whatsapp" id="submitBtn" onclick="prepareOrder()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</button>
</div>

<script>
    let userIP = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¬Ù„Ø¨...";
    fetch('https://api.ipify.org?format=json')
        .then(response => response.json())
        .then(data => userIP = data.ip)
        .catch(() => userIP = "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ");

    function toggleCountryField() {
        const country = document.getElementById('countrySelect').value;
        const customField = document.getElementById('customCountryGroup');
        customField.style.display = (country === 'other') ? 'block' : 'none';
    }

    function toggleOtherField() {
        const itemType = document.getElementById('itemType').value;
        const otherField = document.getElementById('otherDescriptionGroup');
        otherField.style.display = (itemType === 'Ø£Ø®Ø±Ù‰') ? 'block' : 'none';
    }

    function prepareOrder() {
        const isAgreed = document.getElementById('agreeCheck').checked;
        if (!isAgreed) {
            alert("ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø¥Ù‚Ø±Ø§Ø± ØµØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£ÙˆÙ„Ø§Ù‹.");
            return;
        }

        const myNumber = "972592781400";
        const sender = document.getElementById('senderName').value;
        const phone = document.getElementById('senderPhone').value;
        const countryCode = document.getElementById('countrySelect').value;
        const customCode = document.getElementById('customCountryCode').value;
        
        const type = document.getElementById('itemType').value;
        const otherDesc = document.getElementById('otherInfo').value;
        const payment = document.getElementById('paymentMethod').value;

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ù‚ÙˆÙ„
        if(!sender || !phone) {
            alert("ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø§Ø³Ù… ÙˆØ±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ.");
            return;
        }
        if(countryCode === 'other' && !customCode) {
            alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…ÙØªØ§Ø­ Ø§Ù„Ø¯ÙˆÙ„Ø©.");
            return;
        }

        // Ø¬Ù„Ø¨ Ø§Ù„ÙˆÙ‚Øª ÙˆØ§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø§Ù„ÙŠ
        const now = new Date();
        const dateTimeString = now.toLocaleDateString('ar-EG') + " | " + now.toLocaleTimeString('ar-EG');

        // ØªØ­Ø¯ÙŠØ¯ Ù…ÙØªØ§Ø­ Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
        const finalCode = (countryCode === 'other') ? customCode : countryCode;

        // Ø¨Ù†Ø§Ø¡ Ù†Øµ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
        let message = `*Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ - Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ù…Ù„ÙƒÙŠØ©*%0A`;
        message += `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”%0A`;
        message += `ğŸ‘¤ *Ø§Ù„Ù…Ø±Ø³Ù„:* ${sender}%0A`;
        message += `ğŸ“ *Ø§Ù„Ù‡Ø§ØªÙ:* ${finalCode} ${phone}%0A`;
        message += `ğŸ“¦ *Ø§Ù„Ù†ÙˆØ¹:* ${type} ${type === 'Ø£Ø®Ø±Ù‰' ? '(' + otherDesc + ')' : ''}%0A`;
        message += `ğŸ’° *Ø§Ù„Ø¯ÙØ¹:* ${payment}%0A`;
        message += `ğŸ“… *Ø§Ù„ØªÙˆÙ‚ÙŠØª:* ${dateTimeString}%0A`;
        message += `ğŸŒ *IP Ø§Ù„Ù…Ø±Ø³Ù„:* ${userIP}%0A`;
        message += `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”%0A`;
        message += `âœ… *ØªÙ… Ø§Ù„Ø¥Ù‚Ø±Ø§Ø± Ø¨ØµØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª*%0A`;

        window.open(`https://wa.me/${myNumber}?text=${message}`, '_blank');
    }
</script>

</body>
</html>
